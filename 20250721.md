## 问题1：在Ubuntu环境下查看是否安装某个软件

**日期**：2025-07-21  
**标签**：#Ubuntu #软件安装检查 #包管理  
**项目上下文**：XXX项目，安装Coco-LIC时需确认系统是否已安装yaml-cpp


### 问题描述
在Ubuntu系统中，需要确认是否已安装yaml-cpp库，同时避免与ROS已安装版本冲突，如何检查系统中是否安装了特定软件及其版本？


### 解决方案
在Ubuntu中，可以使用以下命令检查软件是否安装及版本信息：

#### 1. 使用`dpkg -s`检查通过apt安装的包
```bash
dpkg -s yaml-cpp 2>/dev/null | grep -E '^Status|^Version'
```
- **输出示例**：
  ```bash
  Status: install ok installed
  Version: 0.6.3-1
  ```
  若未安装，无输出或显示`dpkg-query: package 'yaml-cpp' is not installed`。

#### 2. 使用`apt list`检查可用包
```bash
apt list --installed 2>/dev/null | grep yaml-cpp
```
- **输出示例**：
  ```bash
  yaml-cpp/xenial,now 0.5.2-1 amd64 [installed]
  ```

#### 3. 使用`pkg-config`检查开发库
```bash
pkg-config --modversion yaml-cpp 2>/dev/null
```
- **输出示例**：
  ```bash
  0.6.3
  ```
  若未安装，返回错误（无输出）。

#### 4. 直接查找文件
```bash
find /usr -name "libyaml-cpp*" 2>/dev/null
```
- **输出示例**：
  ```bash
  /usr/lib/x86_64-linux-gnu/libyaml-cpp.so.0.6
  /usr/lib/x86_64-linux-gnu/libyaml-cpp.so
  ```


### 经验总结
1. **多种工具结合使用**：
   - `dpkg -s`适用于检查通过`apt`安装的包
   - `pkg-config`适用于检查开发库（提供`.pc`文件的库）
   - `find`适用于直接查找文件存在性

2. **版本冲突处理**：
   - 若已安装yaml-cpp，可通过`dpkg -L yaml-cpp`查看安装路径，评估与ROS版本是否冲突
   - 建议通过`/opt/ros/noetic/lib`路径确认ROS依赖的yaml-cpp版本


## 问题2：CMake找不到PCL 1.13配置文件

**日期**：2025-07-21  
**标签**：#cmake #PCL #版本配置  
**项目上下文**：XXX项目，编译Coco-LIC时需指定PCL 1.13路径


### 问题描述
CMake编译Coco-LIC时报错：
```bash
CMake Error at Coco-LIC/CMakeLists.txt:43 (find_package):
  Could not find a configuration file for package "PCL" that is compatible
  with requested version "1.13.0".

  The following configuration files were considered but not accepted:
    /usr/lib/x86_64-linux-gnu/cmake/pcl/PCLConfig.cmake, version: 1.10.0
    /lib/x86_64-linux-gnu/cmake/pcl/PCLConfig.cmake, version: 1.10.0
```
错误表明系统中仅存在PCL 1.10配置文件，无法满足Coco-LIC要求的1.13版本。


### 解决方案
在CMakeLists.txt中手动指定PCL 1.13的配置路径：

#### 1. 修改Coco-LIC的CMakeLists.txt
```cmake
# 指定PCL 1.13的配置文件路径
set(PCL_DIR "/path/to/pcl-1.13.0/share/pcl-1.13.0" CACHE PATH "PCL directory")

# 查找PCL包（版本≥1.9即可，实际使用1.13）
find_package(PCL 1.9 REQUIRED COMPONENTS common io filters visualization)

# 包含头文件和库路径
include_directories(${PCL_INCLUDE_DIRS})
link_directories(${PCL_LIBRARY_DIRS})
add_definitions(${PCL_DEFINITIONS})
```

#### 2. 关键参数说明
- `PCL_DIR`：指向PCL 1.13的`PCLConfig.cmake`所在目录
  - 例如：`/home/user/MyLibInstall/pcl-1.13.0/share/pcl-1.13.0`
- `find_package(PCL 1.9 ...)`：请求PCL版本≥1.9（实际使用1.13，避免版本硬编码）


### 经验总结
1. **手动指定路径原则**：
   - 当系统存在多个版本时，通过`_DIR`变量强制CMake使用指定版本
   - 配置文件路径通常为`/path/to/pcl/share/pcl-<version>`

2. **版本兼容性**：
   - `find_package`的版本参数仅为最低要求，实际使用的是`PCL_DIR`指向的版本
   - 确保PCL 1.13的API与Coco-LIC代码兼容（通常高版本兼容低版本需求）

3. **验证配置文件位置**：
```bash
find /path/to/pcl-1.13.0 -name "PCLConfig.cmake"
```
- **输出示例**：
  ```bash
  /path/to/pcl-1.13.0/share/pcl-1.13.0/PCLConfig.cmake
  ```